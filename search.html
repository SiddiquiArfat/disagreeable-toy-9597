<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
</head>
<body>
    
    <div class="top">
        <div class="header">
            <p>Free Shipping on Orders $50+ <span><u>Details</u></span></p>
            <a href="./index.html"><img src="./clothi.png" alt="Error"></a>
            <div class="icon">
                <div id="src" onclick="show()">
                    <i class="fa-sharp fa-solid fa-magnifying-glass"></i>
                </div>

                <div id="pro" onclick="show2()">
                    <i class="fa-regular fa-user"></i>
                </div>
                <div id="basket">
                    <i class="fa-solid fa-bag-shopping"></i>
                </div>
            </div>
        </div>

        
    

        <div class="nav">
            <div class="subnav">
            <a href="./women.html">WOMEN</a>
            <a href="./mens.html">MEN</a>
            <a href="./jeans.html">JEANS</a>
            <a href="">NEW</a>
            <a href="">SALE</a>
            <a href="">STYLE TRIAL RENTAL</a>
            <a href="">COMMUNITY</a>
            <a href="">LABELS WE LOVE</a>
        </div>
        </div>

    </div>

    <div id="sidebar">
        
        <input type="text" name="" id="searchval" placeholder="Enter Product">
        <button id="srcbtn">search</button>
        <h3>TRENDING SEARCH</h3>
        <ul>
            <li><a href="women.html">Womens Trending</a> </li>
            <li><a href="mens.html">Mens Trending</a></li>
            <li><a href="jeans.html">Jeans</a></li>
        </ul>
    </div>
    <div id="sidebar2">
        
        
        <div>
        <h1>EXPRESS<span>INSIDER</span></h1>
        <p>A WORLD OF REWARDS AND ACCESS</p>
        <button >JOIN FOR FREE</button>
        <button id="btn1" onclick="redilog()">SIGN IN</button>
        </div>
        
    </div>


    <div class="heading">
        <div>
                SEARCH / Tops
        </div>
        <div>
            <h1 id="headdisp"></h1>
        </div>
        <div>
            <p>Sort By:</p> 
            <select name="" id="sorting">
                <option value="">Price </option>
                <option value="low">
                    Low To High
                </option>
                <option value="high">
                    High To Low
                </option>
            </select>
        </div>
    </div>



    <div class="bdy">
        <div class="bdyleft">
            <section>
                <h1>BROWSE BY:</h1>
                <div class="browse">
                    <div class="question">
                        <h3>CATEGORY</h3>
                        <i class="fa-duotone fa-plus"></i>
                    </div>
                    <div class="browsecat">
                        <a style="color: black; font-weight: 600;">All Tops</p>
                        <a href="#">Sweaters</a>
                        <a href="#">Shirts & Blouses</a>
                        <a href="#">Body Contour Tops</a>
                        <a href="#">Statement Tops</a>
                        <a href="#">Icons: Portofino Shirts</a>
                        <a href="#">Bodysuits</a>
                        <a href="#">Essential Tops</a>
                        <a href="#">Tees</a>
                        <a href="#">Tanks & Camis</a>
                        <a href="#">Jackkets & Coats</a>
                        <a href="#">Activewear Tops</a>
                    </div>
                </div>
            </section>
            <section>
                <h1>FILTER BY:</h1>
                <div class="browse">
                    <div class="question">
                        <h3>PRICE</h3>

                        <i class="fa-duotone fa-plus"></i>
                        
                    </div>
                    <div class="browsecat">
                        <a style="color: black; font-weight: 600;">All Tops</p>
                        <input type="number" placeholder="Minimum" id="min">
                        <input type="number" placeholder="Maximum" id="max">
                        <button id="sortmin">Filter</button>
                    </div>
                </div>
            </section>
        </div>
        <div class="bdyright">
            <h1 class="righth1"></h1>
        </div>
    </div>    






    <!-- footer -->

<div class="mainfooter">
    <div class="footer">

        <div class="left">
            <div class="buttons">
                <button class="apple">
                    <i class="fa-brands fa-apple"></i>
                    <div>
                        <p>download on the</p>
                        <h3>Apple Store</h3>
                    </div>
                   
                </button>
                <button class="playestore">
    
                    <i class="fa-brands fa-google-play"></i>
                    <div>
                        <p>Get it on</p>
                        <h3>Google Play</h3>
                    </div>
                </button>
            </div>
            <div class="reg">
                <a href="">SIGN UP FOR MOBILE ALERTS</a><br>
                <a href="">SIGN UP FOR EMAIL</a>
                <div class="logos">
                    <i class="fa-brands fa-instagram"></i>
                    <i class="fa-brands fa-snapchat"></i>
                    <i class="fa-brands fa-pinterest-p"></i>
                    <i class="fa-brands fa-facebook-f"></i>
                    <i class="fa-brands fa-twitter"></i>
                    <i class="fa-brands fa-youtube"></i>
                    <i class="fa-brands fa-spotify"></i>
                </div>
            </div>
        </div>

        <div class="table1">
            <table>
                <thead>
                    <th>Store Locator</th>
                </thead>
                <tbody>
                    <tr><td>Find Store</td></tr>
                    
                    <tr></tr><td>Express Factory Outlet</td></tr>
                </tbody>
            </table>

            <table>
                <thead>
                    <th>Express Insider</th>
                </thead>
                <tbody>
                    <tr><td>Express Insider Rewards</td></tr>
                    
                    <tr><td>Frequently Asked Question</td></tr>
                    <tr><td>Trems And Conditions</td></tr>
                </tbody>
            </table>

            <table>
                <thead>
                    <th>Express Credit Card</th>
                </thead>
                <tbody>
                    <tr><td>Benefits</td></tr>
                    <tr><td>Apply</td></tr>
                    <tr><td>Pay/View Account</td></tr>
                </tbody>
            </table>
        </div>
        <div class="table1">
            <table>
                <thead>
                    <th>Gift Card</th>
                </thead>
                <tbody>
                    <tr><td>Buy Gift Cards</td></tr>
                    
                    <tr></tr><td>Check Your Balance</td></tr>
                </tbody>
            </table>

            <table>
                <thead>
                    <th>About Clothishop</th>
                </thead>
                <tbody>
                    <tr><td>Overview</td></tr>
                    <tr><td>Invester Relation</td></tr>
                    <tr><td>ESG</td></tr>
                    <tr><td>Careers</td></tr>
                </tbody>
            </table>
        </div>

        <div class="table1">
            <table>
                <thead>
                    <th>Popular Pages</th>
                </thead>
                <tbody>
                    <tr><td>Women's Clothing</td></tr>   
                    <tr><td>Men's Clothing</td></tr>
                    <tr><td>Men's & Women's Jeans</td></tr>
                    <tr><td>Women's Wear to Work</td></tr>
                    <tr><td>Very Merry Velvet</td></tr>
                    <tr><td>Women's Dresses</td></tr>
                    <tr><td>Women's Editor Pants</td></tr>
                    <tr><td>Women's Tops</td></tr>
                    <tr><td>Women's Sweaters</td></tr>
                    <tr><td>Women's Faux Leather</td></tr>
                    <tr><td>Women's Outerwear</td></tr>
                    <tr><td>Men's Suits</td></tr>
                    <tr><td>Men's Shirts</td></tr>
                    <tr><td>Men's Sweatshirts & Hoodies</td></tr>
                    <tr><td>Men's Sweaters</td></tr>
                    <tr><td>Men's Pants</td></tr>
                    <tr><td>Men's Chinos & Joggers</td></tr>
                    <tr><td>Men's Outerwear</td></tr>
                    <tr><td>Express Style 101</td></tr>
                </tbody>
            </table>
        </div>

        <div class="table1">
            <table>
                <thead>
                    <th>Customer Services</th>
                </thead>
                <tbody>
                    <tr><td>Contact Us</td></tr>
                    <tr><td>Help</td></tr>
                    <tr><td>Clothishop Coupons</td></tr>
                    <tr><td>Shipping Policy</td></tr>
                    <tr><td>Returns Policy</td></tr>
                    <tr><td>Student Discount</td></tr>
                    <tr><td>Feedback</td></tr>
                    <tr><td>Express Market FAQ</td></tr>
                    <tr><td>Klarna Payments</td></tr>
                    <tr><td>Google Ad Price Policy</td></tr>
            </table>       
        </div>
        
    </div>
    <div class="bot">
        <p>Terms & Conditions | Accessibility | About Ads | Privacy Policy | Do Not Sell My Personal Information | Site Map | © 2023 Clothishop. All rights reserved.</p>
    </div>
    </div>
</body>
<script>
    


     let select = document.querySelector(".question");
     let select2 = document.querySelector(".browsecat");
    


    // filter js
    async function fetchapi(){
        let url = await fetch('https://63c8bafd075b3f3a91e5c84d.mockapi.io/product');
        let data = await url.json(); 
        console.log(data);
        let arr = [];
        // for(let i=0;i<data.length;i++){
        //     if(data[i].category == 'women'){
        //         arr.push(data[i]);
        //     }
        // }
        let a = JSON.parse(localStorage.getItem('src')).toUpperCase();
        let head = document.getElementById('headdisp');
        head.textContent = "You searched for '"+a||"Data No Found"+"'"
        let newarr = [];
        if(a == ""){
            fun();
        }
        else{
        for(let i=0;i<data.length;i++){
            if(data[i].title.toUpperCase().indexOf(a)>-1){
                newarr.push(data[i]);
            }
        }
        console.log(newarr);
        appenddata(newarr);
    }
    }
    fetchapi();

    // function fun(){
    //     let h1 = 
    // }


// filter
    let min = document.getElementById('min');
    let max = document.getElementById('max');
    let btn = document.getElementById('sortmin');
    btn.addEventListener('click',()=>{
        console.log(min.value,max.value);
        fetchapifilter(min.value,max.value);
    })


    async function fetchapifilter(min,max){
        let url = await fetch('https://63c8bafd075b3f3a91e5c84d.mockapi.io/product');
        let data = await url.json(); 
        console.log(data);
        let arr = [];
        for(let i=0;i<data.length;i++){
            if((+data[i].price)>=min && (+data[i].price)<=max){
                arr.push(data[i]);
            }
        } 
        JSON.stringify(arr);
        console.log("workin"+arr);
        appenddata(arr);
    }
    function show(){
    document.getElementById('sidebar').classList.toggle('active');
}
function show2(){
    document.getElementById('sidebar2').classList.toggle('active');
}
function redilog(){
    location.replace('./login.html')
}
let cart = document.getElementById('basket');
cart.addEventListener('click',()=>{
    location.replace('./cart.html');
})



    // sorting js

    let sorting = document.getElementById("sorting");
    sorting.addEventListener('change',()=>{
        console.log(sorting.value);
        fetchapi3(sorting.value);
    })




    async function fetchapi3(value){
        let url = await fetch('https://63c8bafd075b3f3a91e5c84d.mockapi.io/product');
        let arr = await url.json(); 
        console.log(arr);
        

        let newarr = [];
        if(value == 'low'){
        function comparee(a,b){
            let aa = getvalue(a);
            let bb = getvalue(b);
            return aa-bb;
        }
        function getvalue(ele){
            return +(ele.price) 
        }
        newarr = arr.sort(comparee)
        }
        else{
            function comparee(a,b){
            let aa = getvalue(a);
            let bb = getvalue(b);
            return bb-aa;
        }
        function getvalue(ele){
            return +(ele.price) 
        }
        newarr = arr.sort(comparee)
        }

        console.log(newarr);
        appenddata(newarr);
    }





    function appenddata(arr){
        let bodyel = document.querySelector('.bdyright');
        bodyel.innerHTML = ""; 
        let newarr = [];
        arr.forEach((element,index) => {   
            let div = document.createElement('div');
            let img = document.createElement('img');
            img.src = element.image;
            let p1 = document.createElement('p');
            p1.textContent = 'NEW';
            let a2 = document.createElement('a');
            a2.addEventListener('click',()=>{
                newarr.push({...element});
                localStorage.setItem('product',JSON.stringify(newarr));
            })
            a2.href = "./product.html";
            a2.textContent = element.title;
            let p3 = document.createElement('p');
            p3.textContent = `$${element.price}`;
            let p4 = document.createElement('p');
            p4.textContent = element.rating;
            let p5 = document.createElement('p');
            p5.textContent = "Buy 1, Get 1 50% Off";
            div.append(img,p1,a2,p3,p5,p4);
            bodyel.append(div);
        });

        let cart = document.getElementById('basket');
        cart.addEventListener('click',()=>{
        location.replace('./cart.html');
        })

        let btn = document.getElementById('srcbtn');
let val = document.getElementById('searchval');

btn.addEventListener('click',function(e){
    e.preventDefault();
 
    let a = val.value;
    console.log(a)  
    let arr = a;
    localStorage.setItem('src',JSON.stringify(arr)); 
    location.replace('./search.html');
})

    }
</script>
</html>